Sorry Rich, but I still think we should talk about Svelte's decision to leave TypeScript and why I think it was probably actually the right call.

Svelte is one of the first early adopters of TypeScript, especially outside of the TSJS file world where Svelte has its own file syntax. Dots felt and they did a lot of hard work to make sure that inside of Spelled files you still have type safety. 

Rich deeply understands type safety, the importance of what it enables for you as a developer, and how much more confidently you can move in building applications. So much so that he even says it all the time. He does not recommend building application code without TypeScript and type safety.

However, that's not what we're talking about when we say Svelte left TypeScript. Svelte still supports TypeScript. You can still use TypeScript. Was felt in fact, if you're using Svelte you probably should. TypeScript is a lot harder a burden for library devs. 

I have a video coming soon where I talk about tech that shifts the burden and I think TypeScript strength is how much it takes away from the application dev in terms of worrying about consistency and reliability. But also how much more of that burden gets shifted to the library author to make sure the typed contracts are correct such that anyone consuming the library will have a good time with autocomplete and won't break their application.

As well as the utter chaos around actually linking to and exporting the right types for the things you're building. TypeScript is part of your library build step is obnoxious and it makes the developer experience painful. We just open source the repo for upload thing and if you want to look through it you can see a bunch of the hacks we did just to make an npm package that uses TypeScript that has the correct type definitions but also can be used in dev for us to iterate and experiment with it.

It was hard to do that right and it cost us a lot of time as well as Julius jumping in and helping us out. TypeScript is a much much higher burden on library authors than it is application devs period. But is there another way? Can we get the type safety that we expect from a library without having to write the whole thing in TypeScript and deal with the consequences of writing everything in TypeScript?

There is and although it has some gotchas it also has some benefits and it's really interesting to see Svelte bet all in on JS doc typings. JSDoc is a syntax for leaving comments in your code that tell your IDE or an exported like builder or doc step what each function does.
In this video, Rich talks about the benefits of using JSDoc syntax in TypeScript. He explains that JSDoc is a way to write contracts between files and between packages that are self-documenting and really handy. With traditional TypeScript, when you give a thing the type of thing, it just tells you that. But if you give it a JSDoc comment instead, you can write details for that with the typing, and it's the co-location of a definition through a traditional comment and the type as part of the syntax for it that makes the readability of this stuff much better.

Rich also mentions that they went pretty out of their way to try and do similar, where even though they have all their type definitions done the traditional TypeScript way, they also leave comments all over the stuff so that you can get good definitions when you consume it. He puts an example here so that when you hover over the upload button, you see an example of how to use it. 

However, they have had to do piles of hacks from both JSDoc as well as TypeScript where in order to get that working at all, in order to get the type error, he had to lie to TypeScript a lot. In particular up here, he voids out the type if you don't pass a router and return, you forgot to pass the generic instead of the actual key. But that's a hack and the key differentiator isn't just like the syntactical difference, certainly, it isn't that at all. 

It's that you don't need to build step anymore, so you don't need something to convert this TSX file into a JS file that can then run in the browser. If you have MJS or JS files that happen to use the syntax, that's just a comment, it gets ignored by the browser which allows you to not have to build anything in order to use the stuff and you can still do.
When it comes to type safety in your CI, using the type definitions you put above these things, if you use the syntax that Rich Harris showed here, where it's at type thing that's still type safe, you'll still get errors if you try to assign it something you're not supposed to. I can even demo this quick and now without writing TypeScript. I have type safety, this is a JS file that's typesafe. I don't think we should use this in apps though because it's much harder to get a properly guaranteed type system. 

But if your codebase is a small number of files and a large amount of exports that people need to deeply understand and the number of files and change a lot that the contents of them do, this model makes a lot of sense. Especially for library devs. And as weird as it might be for me, the TypeScript guy, to sit here and say hey, I think it makes sense, they moved off of TypeScript, I'm going to sit here and do it because it absolutely makes them more productive as they work in this codebase and it's really nice to see how much of a win they've already found from it. 

This was a great tweet Matt made that I've thought a lot about and haven't done a video on. It's actually in my to-do. Here it's just the bird and I mentioned I was going to do this later. This is a video about how certain technologies make developers work harder on the library side in order to make life easier for the application devs and that's why it's so cool to see people understand like these are very different. 

I've written way more TypeScript over the last two months than I have in years because normally when I write apps in TypeScript I'm just writing JS but when I am deep in library land making packages I have to export for y'all to consume, I'm writing a lot more typings and I'm writing a lot more chaos within those. It's just a fundamental different world and Rich has decided to be the change so to speak and be one of the first people to push the idea of using type safety without using TypeScript by deeply embracing JS doc comments. It theoretically will make working in their codebase significantly simpler and they've already made this change in Svelte kit and really enjoyed it. 

I trust Rich in the team's judgment in moving Svelte as well because they wouldn't have done this if it didn't work. In Svelte kit, it's a bold move. It's not what many have made yet but I do think.
We're going to see more Library authors taking advantage of JSDoc. This is the method of defining the typesafe contracts within their projects. I'm really proud of the work they're doing. I'm so excited to see how people use this in the future. And if using JS talk this way starts to become the norm, huge shout out to the Svelte team for being willing to pioneer these things. 

It's really cool to see. If you all want to hear a little bit more about Rich's hot takes and also get my reactions to them, I'm going to pin a video here where I react to his most recent talk. So check that out if you haven't already. 

Thank you as always. Peace notes. Sorry Rich, but I still think we should talk about Svelte's decision to leave TypeScript and why I think it was probably actually the right call. 

Svelte is one of the first early adopters of TypeScript, especially outside of the TS/JS file world where Svelte has its own file syntax. Dots felt and they did a lot of hard work to make sure that inside of spelled files, you still have type safety. 

Rich deeply understands type safety, the importance of what it enables for you as a developer, and how much more confidently you can move in building applications. So much so that he even says it all the time. He does not recommend building application code without TypeScript and type safety. 

However, that's not what we're talking about when we say Svelte left TypeScript. Svelte still supports TypeScript. You can still use TypeScript. Was felt in fact if you're using Svelte, you probably should. 

TypeScript is a lot harder, a burden for library devs. I have a video coming soon where I talk about tech that shifts the burden and I think TypeScript strength is how much it takes away from the application dev in terms of worrying about consistency and reliability. But also how much more of that burden gets shifted to the library author to make sure the typed contracts are correct. 

Such that anyone consuming the library will have a good time with autocomplete and won't break their application as well as the utter chaos around actually linking to and exporting the right types for the things you're building. TypeScript is part of your library build step is obnoxious and it makes the developer experience painful. 

We just open sourced the repo for UploadThing and if you want to look through it, you can see a bunch of the hacks we did just to make an npm package that uses TypeScript that has the correct type definitions, but also can be used in dev for us to iterate and experiment with it. It was hard.
Doing that right, and it cost us a lot of time, as well as Julius jumping in and helping us out. TypeScript is a much, much higher burden on library authors than it is application devs period. But is there another way? Can we get the type safety that we expect from a library without having to write the whole thing in TypeScript and deal with the consequences of writing everything in TypeScript?

There is, and although it has some gotchas, it also has some benefits and it's really interesting to see. Svelte bet all in on JS doc typings. JSDoc is a syntax for leaving comments in your code that tell your IDE or an exported like builder or Doc step what each function, what each variable, what each thing does. It's meant to be a way to write contracts between files and between packages. Is that are self-documenting and really handy.

If you look at the example Rich tweeted here, you'll see that with traditional TypeScript, when you give a thing the type of thing, it just tells you that. But if you give it a JSDoc comment instead, you can write details for that with the typing and it's the co-location of a definition through a traditional comment and the type as part of the syntax for it that makes the readability of this stuff much better.

And with upload thing, we went pretty out of our way to try and do similar where even though we have all our type definitions done the traditional TypeScript way, I also leave comments all over the stuff so that you can get good definitions when you consume it. Here where I put an example, so now when you hover over the upload button, you see an example of how to use it. And then when you get a type error, if you consume it incorrectly here, and we like delete this, we got a type error that says you forgot to pass the generic. I'm like what's that mean? Hover over this, oh there's the example, I forgot to put that there and now it's good.

But we've had to do piles of hacks from both JSDoc as well as TypeScript where in order to get that working at all, in order to get like the type error I had to lie to TypeScript a lot. In particular up here, I void out the type if you don't pass a router and return, you forgot to pass the generic instead of the actual key. But like that's a hack and there's a huge difference between this code and this code. And although I understand this code is like a complex generic and this code is just an example, there is something to what Rich said here around.
The JS doc syntax results in code that is better documented and consumable, as well as being a little bit more readable, and you're actually working on it and maintaining it. But the key differentiator isn't just like the syntactical difference, certainly isn't that at all. It's that you don't need to build step anymore, so you don't need something to convert this TSX file into a JS file that can then run in the browser. If you have MJS or JS files that happen to use the syntax, that's just a comment, it gets ignored by the browser, which allows you to not have to build anything in order to use the stuff, and you can still do type checks in your CI using the type definitions you put above these things. If you use the syntax that he showed here, where it's at type thing that's still type safe, you'll still get errors if you try to assign it something you're not supposed to. 

I can even demo this quick, and now without writing TypeScript, I have type safety. This is a JS file that's typesafe. I don't think we should use this in apps though because it's much harder to get a properly guaranteed type system. But if your codebase is a small number of files and a large amount of exports that people need to deeply understand and the number of files and change a lot, that the contents of them do, this model makes a lot of sense, especially for library devs. And as weird as it might be for me, the TypeScript guy, to sit here and say hey, I think it makes sense, they moved off of TypeScript, I'm going to sit here and do it because it absolutely makes them more productive as they work in this codebase. 

And it's really nice to see how much of a win they've already found from it. This was a great tweet Matt made that I've thought a lot about and haven't done a video on. It's actually in my to-do here. It's just the bird, and I mentioned I was going to do this later. This is a video about how certain technologies make developers work harder on the library side in order to make life easier for the application devs, and that's why it's so cool to see people understand like these are very different. 

I've written way more TypeScript over the last two months than I have in years because normally when I write apps in TypeScript, I'm just writing JS. But when I am deep in library land making packages, I have to export for y'all to consume, I'm writing.
There are a lot more typings and I'm writing a lot more chaos within those. It's just a fundamental different world and Rich has decided to be the the change, so to speak, and be one of the first people to push the idea of using type safety without using TypeScript. By deeply embracing JS Doc comments, it theoretically will make working in their code base significantly simpler and they've already made this change in Svelte Kit and really enjoyed it. I trust Rich in the team's judgment in moving Svelte as well because they wouldn't have done this if it didn't work. 

In Svelte Kit, it's a bold move. It's not what many have made yet but I do think we're going to see more library authors taking advantage of JS Doc. It is the method of defining the typesafe contracts within their projects. Really proud of the work they're doing. I'm so excited to see how people use this in the future and if using JS talk this way starts to become the norm. Huge shout out to the Svelte team for being willing to pioneer these things. 

It's really cool to see. If you all want to hear a little bit more about Rich's hot takes and also get my reactions to them, I'm going to pin a video here where I react to his most recent talk. So check that out if you haven't already. Thank you as always. Peace notes.
